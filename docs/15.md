## 15. 리덕스 미들웨어와 외부 데이터 연동


서버의 REST API를 호출할 때는 요청 후 로딩, 응답에 따른 성공, 실패 세 가지 상태를 관리해야한다. 리액트 컴포넌트의 state만 사용해도 관리할 수 있으나, 리덕스와 리덕스 미들웨어를 사용하면 상태를 간편하게 관리할 수 있다.


### 미들웨어

리덕스 미들웨어는 액션과 리듀서의 중간자로, 액션을 디스패치 했을 때 리듀서에서 처리하기 전에 지정된 작업을 실행한다.

create-react-app으로 만든 프로젝트에 Ducks 구조를 사용하여 리덕스를 적용한 단순 프로젝트 클론. 간단산 숫자 카운터가 구현되어 있으며, store 생성 로직은 store.js 파일로 분리

```shell
$ git clone https://github.com/vlpt-playground/redux-starter-kit.git
$ cd redux-starter-kit
$ yarn
```

```js
// src/lib/loggerMiddleware.js
const loggerMiddleware = store => next => action => {
    /* 미들웨어 내용 */
};
```

next는 store.dispatch와 비슷한 역할로, 처리해야 할 미들웨어가 있다면 미들웨어로, 없다면 리듀서로 액션을 전달한다.

미들웨어는 store를 생성할 때 적용할 수 있다.

```js
const store = createStore(modules, applyMiddleware(loggerMiddleware));
```

미들웨어에서는 액션정보에 따라 무시하거나(next 호출 않고 return), 액션 정보를 수정한 후 리듀서에 전달할 수도 있다. 특히 네트워크 요청과 같은 비동기 작업을 할 때 매우 유용하다.

